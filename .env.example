# OpenSUSE Ceph Cluster - Environment Configuration
# Copy this file to .env and customize for your environment
# Usage: cp .env.example .env

# ====================
# PROXMOX CONFIGURATION
# ====================

# Proxmox API credentials
export PROXMOX_API_USER="root@pam"
export PROXMOX_API_PASSWORD="your_password_here"
export PROXMOX_API_HOST="proxmox.example.com"
export PROXMOX_NODE="pve"

# Proxmox SSH access
export PROXMOX_SSH_USER="root"
export PROXMOX_SSH_KEY="~/.ssh/id_rsa"

# ====================
# IMAGE CONFIGURATION
# ====================

# Path where the OpenSUSE image will be stored on Proxmox
# Common locations:
#   /var/lib/vz/template/iso/         - ISO storage
#   /var/lib/vz/template/qemu/        - VM template storage
#   /mnt/pve/storage/template/        - Custom storage mount
export OPENSUSE_IMAGE_PATH="/var/lib/vz/template/iso/opensuse-leap-custom.qcow2"

# Optional: Image name (defaults to opensuse-leap-custom.qcow2)
# Change this if you want a different image name
export OPENSUSE_IMAGE_NAME="opensuse-leap-custom.qcow2"

# Optional: Build directory on Proxmox (where KIWI builds the image)
# Defaults to /root/kiwi
export KIWI_BUILD_DIR="/root/kiwi"

# ====================
# BUILD VM CONFIGURATION (RECOMMENDED)
# ====================

# Dedicated OpenSUSE VM for building KIWI images
# This is the RECOMMENDED approach as KIWI works best on OpenSUSE
# The build VM runs on Proxmox and creates images that are transferred back

# Build VM settings
export BUILD_VM_ID="100"                    # VM ID for build VM
export BUILD_VM_NAME="kiwi-builder"         # VM name
export BUILD_VM_MEMORY="4096"               # 4GB RAM for building
export BUILD_VM_CORES="4"                   # CPU cores
export BUILD_VM_DISK_SIZE="50G"             # Disk size
export BUILD_VM_STORAGE="local-lvm"         # Storage for build VM
export BUILD_VM_BRIDGE="vmbr0"              # Network bridge
export BUILD_VM_IP=""                       # Static IP (leave empty for DHCP)

# The build VM IP will be auto-detected and saved after deployment
# Or set manually if you know the IP

# ====================
# GITHUB SSH KEYS
# ====================

# GitHub username for SSH key import (leave empty to skip)
export GITHUB_USERNAME=""

# ====================
# STORAGE CONFIGURATION
# ====================

export STORAGE_POOL="nvme-pool"
export DATA_DISK_SIZE="1000G"  # Size of each data disk (4 per VM)
export MON_DISK_SIZE="100G"    # Size of mon disk (1 per VM)

# ====================
# NETWORK CONFIGURATION
# ====================

export PRIVATE_BRIDGE="vmbr1"  # Private/cluster network
export PUBLIC_BRIDGE="vmbr0"   # Public/client network

# ====================
# VM DEFAULT SETTINGS
# ====================

# Memory (in MB)
# Examples:
#   8GB  = 8192
#   16GB = 16384
#   32GB = 32768
#   64GB = 65536
export VM_DEFAULT_MEMORY="32768"

# CPU cores per VM
export VM_DEFAULT_CORES="8"
export VM_DEFAULT_SOCKETS="1"
export VM_CPU_TYPE="host"

# VM behavior
export AUTO_START="true"
export VM_ROOT_PASSWORD="opensuse"

# Number of VMs to deploy (1-4)
export NUM_VMS="4"

# ====================
# INDIVIDUAL VM CONFIGURATION
# ====================
# Uncomment and customize to override defaults for specific VMs

# VM1 Configuration
# export VM1_NAME="ceph-node1"
# export VM1_VMID="200"
# export VM1_MEMORY="16384"
# export VM1_CORES="4"
# export VM1_SOCKETS="1"
# export VM1_ONBOOT="1"
# export VM1_IP="192.168.1.100"

# VM2 Configuration
# export VM2_NAME="ceph-node2"
# export VM2_VMID="201"
# export VM2_MEMORY="16384"
# export VM2_CORES="4"
# export VM2_SOCKETS="1"
# export VM2_ONBOOT="1"
# export VM2_IP="192.168.1.101"

# VM3 Configuration
# export VM3_NAME="ceph-node3"
# export VM3_VMID="202"
# export VM3_MEMORY="16384"
# export VM3_CORES="4"
# export VM3_SOCKETS="1"
# export VM3_ONBOOT="1"
# export VM3_IP="192.168.1.102"

# VM4 Configuration
# export VM4_NAME="ceph-node4"
# export VM4_VMID="203"
# export VM4_MEMORY="16384"
# export VM4_CORES="4"
# export VM4_SOCKETS="1"
# export VM4_ONBOOT="1"
# export VM4_IP="192.168.1.103"

# ====================
# CONFIGURATION EXAMPLES
# ====================

# Small Development Cluster
# export VM_DEFAULT_MEMORY="8192"   # 8GB
# export VM_DEFAULT_CORES="4"
# export DATA_DISK_SIZE="500G"
# export NUM_VMS="3"

# Production Cluster (DEFAULT ABOVE)
# export VM_DEFAULT_MEMORY="32768"  # 32GB (already set as default)
# export VM_DEFAULT_CORES="8"       # (already set as default)
# export DATA_DISK_SIZE="2000G"
# export NUM_VMS="4"

# High-Performance Cluster
# export VM_DEFAULT_MEMORY="65536"  # 64GB
# export VM_DEFAULT_CORES="16"
# export DATA_DISK_SIZE="4000G"

# Mixed VM Sizes
# export VM_DEFAULT_MEMORY="16384"
# export VM_DEFAULT_CORES="4"
# export VM1_MEMORY="32768"   # VM1: 32GB
# export VM1_CORES="8"        # VM1: 8 cores
# export VM3_MEMORY="65536"   # VM3: 64GB
# export VM3_CORES="16"       # VM3: 16 cores
